{% extends 'base.html' %}
{% load static %}

{% block content %}

{% for message in messages %}
<div class="alert alert-warning alert-dismissible fade show" id="msg" role="alert">
    {{message}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endfor %}

<div id="recipe-unit-card" class="card bg-dark text-white d-md-none d-sm" style="max-width: 900px;">
    {% if "default-image" in recipe_object.food_image.url %}
    <img src="{% static 'images/default-image.jpg' %}" class="card-img" alt="Stony Beach" />
    {% else %}
    <img src="{{ recipe_object.food_image.url }}" class="card-img" alt="Stony Beach" />
    {% endif %}
    <div class="card-img-overlay">
        <h5 class="card-title">{{recipe_object.title}}</h5>
        <p class="card-text">
            {{recipe_object.short_description}}
        </p>
        {% if tags %}
                {% for tag in tags %}
                <span class="card-text">{{tag}}</span>
                {% endfor %}
                {% endif %}
    </div>
</div>

<div class="container-fluid d-none d-md-block">
    <div id="card-row" class="row">
        <div class="card-col col-6">
            {% if "default-image" in recipe_object.food_image.url %}
            <img src="{% static 'images/default-image.jpg' %}" id="card-img-fluid" class="img-fluid large-image" alt="...">
            {% else %}
            <img src="{{ recipe_object.food_image.url }}" id="card-img-fluid" class="img-fluid large-image" alt="...">
            {% endif %}
        </div>
        <div id="large-card" class="col-6">
                <h5>{{recipe_object.title}}</h5>
                <hr>
                <h6>{{recipe_object.short_description}}</h6>
                {% if tags %}
                <hr>
                {% for tag in tags %}
                <span>{{tag}}</span>
                {% endfor %}
                {% endif %}
        </div>
    </div>
</div>

<div class="container-fluid">
    <h2>Ingredients:</h2>
    <div class="row">
        <div class="col">
            <p class="instructions">{{recipe_object.ingredients|linebreaksbr}}</p>
        </div>
    </div>
    <h2>Instructions for Preparation:</h2>
    <div class="row">
        <div class="col">
            <p class="instructions">{{recipe_object.instructions}}</p>
        </div>
    </div>
    <div>
        {% for tag in tags %}
        <span>
            <button type="button" class="btn btn-info">
                {{tag}}
            </button>
        </span>
        {% endfor %}
    </div> <br>
    <p>Recipe created by {{recipe_object.creator}}</p>
    <p>Recipe date of publication: {{recipe_object.created}}</p>

    {% if user.is_authenticated %}
    {% if user == recipe_object.creator %}
    <div>
        <a class="edit-del-buttons" href="{% url 'update-recipe' recipe_object.id %}"><button type="button"
                class="btn btn-info">Edit Recipe</button></a>
        <a href="{% url 'delete-recipe' recipe_object.id %}"><button type="button" class="btn btn-danger">Delete
                Recipe</button></a>
    </div><br>
    {% endif %}
    {% endif %}

</div>

<div class="container-fluid">
    <h3>Comments:</h3>
    <hr>
    <div class="row">
        <div class="col-6">
            {% for comment in comments %}
            <div id="comment-background">
                <p class="comment-p">{{comment.body}}</p>
                <p id="comment-p2" class="comment-p">Comment made by {{comment.name}} on {{comment.created}}</p>
            </div>
            <hr>
            {% endfor %}
        </div>
        {% if user.is_authenticated %}
        <div class="col-6">
            <form action="" method="POST" id="comment-form" class="register-form">
                {% csrf_token %}
                <!-- <p class="comment-section">Make a Comment:</p> -->
                <textarea name="body" id="form.body" class="recipe-form comment-section" rows="6"
                    placeholder="Leave your comment here"></textarea>
                <input class="comment-section" type="submit" value="Comment">
            </form>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}